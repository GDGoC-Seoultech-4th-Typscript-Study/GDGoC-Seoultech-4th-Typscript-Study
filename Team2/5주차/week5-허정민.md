# typescript 5주차

---

### item 23 한꺼번에 객체 생성하기

객체를 생성할 때는 속성을 하나씩 추가하기보다 여러 속성을 포함해서 한꺼번에 생성해야 타입 추론에 유리하다.

- 객체를 반드시 나눠 만들어야 하는 경우, 타입 단언문(as)를 사용해 타입 체커를 통과시킬 수 있다.
- 작은 객체를 조합해 큰 객체를 만드는 경우에 여러 단계를 거치지 않고 객체 전개 연산자를 사용하는 것이 유용하다.
- 객체 전개 연산자를 사용하면 큰 객체를 한꺼번에 생성 가능하고 타입 걱정없이 필드 단위로 객체 생성이 가능하다.
- 타입에 안전한 방식으로 조건부 속성 추가 시 null 또는 {}로 객체 전개를 사용한다.
- 객체나 배열을 변환해 새로운 객체나 배열을 생성하고 싶으면 내장된 함수형 기법 or 로대시와 같은 유틸리티 라이브러리를 사용한다.

## 

---

### item 24 일관성 있는 별칭 사용하기

```jsx
const borough = { name: 'Brooklyn', location: [40.688, -73.979] }
const loc = borough.location
```

별칭 값을 변경하면 원래 속성값에서도 변경된다. 

> 별칭을 남발하면 제어 흐름을 분석하기 어렵다. 별칭은 신중하게 사용해야 코드를 잘 이해할 수 있고, 오류도 쉽게 찾을 수 있다
> 

별칭 사용시 주의할 점

- 제어 흐름 분석을 방해하면 안된다
- 객체 비구조화를 이용해 일관된 이름을 사용한다

객체 비구조화 이용시 주의할 점

- x,y가 선택적 속성일 경우, 타입 경계에 null 값을 추가하는 것이 좋다
- 빈 배열인 경우 그 값이 없음을 나타내는 좋은 방법으로 사용될 수 있다.

> 함수 호출이 객체 속성의 타입 정제를 무효화할 수 있다는 점은 주의해야 한다. 속성보다 지역 변수를 사용하면 타입 정제를 믿을 수 있습니다.
> 

---

### item 25 비동기 코드에는 콜백 대신 async 함수 사용하기

과거에는 비동기 동작을 모델링하기 위해 콜백을 사용했다. 콜백 지옥을 극복하기 위해 프로미스 개념을 도입했다. ES2017에서는 async와 await 키워드를 도입하여 콜백 지옥을 더 간단하게 처리할 수 있게 되었다. 

```jsx
async function fetchPages() {
  const response1 = await fetch(url1)
  const response2 = await fetch(url2)
  const response3 = await fetch(url3)
  // ...
}
```

async와 await를 사용하면 코드 가독성이 높아지고, 에러 처리가 쉬워지고, 비동기 코드의 흐름을 더욱 명확하게 파악할 수 있다. 

어떤 함수가 프로미스를 반환한다면 async로선언하는 것이 좋다.

---

### item 26 타입 추론에 문맥이 어떻게 사용되는지 이해하기

타입을 추론할 때 단순 값만 고려하지 않고 값이 존재하는 곳의 문맥까지 확인한다. 

종종 이상한 결과 발생 → 타입 추론에 문맥이 어떻게 사용되는지 이해함으로써 대처 가능

```jsx
type Language = 'JavaScript' | 'TypeScript' | 'Python';

function setLanguage(language: Language) {/*...*/}

setLanguage('JavaScript');

let language = 'JavaScript';
setLanguage(language);
```

string으로 추론 → language 타입으로 할당 불가능하므로 오류 발생

- 타입 선언에서 language의 가능한 값을 제한하여 해결한다
- language를 상수로 만들어 해결한다

튜플 사용 시 주의점

as const는 문맥 손실과 관련한 문제를 깔끔하게 해결할 수 있지만, 한 가지 단점을 가지고 있다.

타입 정의에 실수가 있다면 오류는 타입 정의가 아니라 호출되는 곳에서 발생 한다는 것이다.

객체 사용 시 주의점

문맥에서 값을 분리하는 문제는 큰 객체에서 상수를 뽑아 낼 때도 발생한다.

타입 선언을 추가하거나 상수 단언을 사용해 문제를 해결해야 한다.

콜백 사용 시 주의점

콜백을 다른 함수로 전달할 때, 타입스크립트는 콜백의 매개변수 타입을 추론하기 위해 문맥을 사용한다. 

콜백을 상수로 뽑아내면 문맥이 소실되고 noImplicitAny가 발생한다.

매개변수에 타입 구문을 추가해 문제를 해결한다.